rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Allow admin login check
    match /admin/{docId} {
      allow read: if true;
      allow write: if false; // Admins are managed directly in the console
    }

    // Allow creating users
    match /users/{userId} {
      allow read, write: if true; // In production, restrict to authenticated admins
    }

    // Allow managing classes
    match /classes/{classId} {
      allow read, write: if true; // In production, restrict to authenticated admins/teachers
    }

    // Allow managing announcements
    match /announcements/{announcementId} {
      allow read, write: if true; // In production, restrict to authenticated admins
    }

    // Allow managing fees
    match /fees/{feeId} {
      allow read, write: if true; // In production, restrict to authenticated admins
    }

    // Default deny for any other collection
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
